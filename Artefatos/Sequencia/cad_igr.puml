@startuml
actor Usuario

boundary Frontend as FE
control IgrejaController as C
control IgrejaService as S
entity Igreja as M
entity Cidade as City
control AuthorizationService as AuthZ
control ValidationService as Val

Usuario -> FE : preencherFormIgreja()
FE -> C : POST /igrejas

C -> AuthZ : verificarPermissao("CADASTRAR_IGREJA")
AuthZ --> C : permitido

C -> Val : validarCampos(dados)
Val --> C : ok

C -> S : cadastrarIgreja(dados)

S -> City : find(dados.cidade_id)
City --> S : cidadeExiste

alt cidade não existe
    S --> C : erro("Cidade inválida")
    C --> FE : respostaErro
    FE --> Usuario : exibir erro
else
    S -> M : create(dados)
    M --> S : igrejaCriada
    S --> C : sucesso
    C --> FE : respostaOK
    FE --> Usuario : exibir sucesso
end
@enduml
