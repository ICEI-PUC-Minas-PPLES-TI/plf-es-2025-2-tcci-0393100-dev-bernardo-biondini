@startuml
skinparam shadowing false
skinparam monochrome false
skinparam sequenceMessageAlign center
skinparam ParticipantBorderColor #333
skinparam ParticipantBackgroundColor #F7F7F7
skinparam ArrowColor #555
skinparam NoteBackgroundColor #fffbe6
title UC 33 - Cadastrar Evento (Sequência)

actor Usuario as User
control AgendaEventoController as C
control AgendaEventoService as S
database AgendaEventoDB as DB
control DetectarConflitosService as INC_DetectarConflitosService
control VincularContextoService as EXT_VincularContextoService

' Fluxo principal
User -> C : 1. Solicita "Cadastrar Evento"
C -> S : 2. Executa lógica de negócio
S -> INC_DetectarConflitosService : 2.1 Chama DetectarConflitosService
INC_DetectarConflitosService -> DB : 2.1.1 Operação CRUD relacionada
DB --> INC_DetectarConflitosService : 2.1.2 OK/Resultado
INC_DetectarConflitosService --> S : 2.1.3 Retorno
S -> DB : 3. Operação CRUD (criar/atualizar/consultar)
DB --> S : 4. Resultado
S -> EXT_VincularContextoService : 5.1 Extensão VincularContexto
EXT_VincularContextoService -> DB : 5.1.1 Operação CRUD
DB --> EXT_VincularContextoService : 5.1.2 OK/Resultado
EXT_VincularContextoService --> S : 5.1.3 Retorno
S --> C : 6. Resposta de negócio
C --> User : 7. Sucesso/Feedback
note over C,S
Includes: DetectarConflitos\nExtends: VincularContexto
end note

@enduml