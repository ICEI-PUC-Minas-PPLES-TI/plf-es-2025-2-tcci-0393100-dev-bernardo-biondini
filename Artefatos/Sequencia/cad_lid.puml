@startuml
actor Usuario

boundary Frontend as FE
control LiderancaController as C
control LiderancaService as S
entity Lideranca as M
entity Instituicao as Inst
control AuthorizationService as AuthZ
control ValidationService as Val

Usuario -> FE : preencherDadosLideranca()
FE -> C : POST /liderancas

C -> AuthZ : verificarPermissao("CADASTRAR_LIDERANCA")
AuthZ --> C : permitido

C -> Val : validarCampos(dados)
Val --> C : ok

C -> S : cadastrarLideranca(dados)

S -> Inst : find(dados.instituicao_id)
Inst --> S : instituicaoExiste

alt instituição não existe
    S --> C : erro("Instituição inválida")
    C --> FE : respostaErro
    FE --> Usuario : exibir erro
else
    S -> M : create(dados)
    M --> S : liderancaCriada
    S --> C : sucesso
    C --> FE : respostaOK
    FE --> Usuario : exibir sucesso
end
@enduml
