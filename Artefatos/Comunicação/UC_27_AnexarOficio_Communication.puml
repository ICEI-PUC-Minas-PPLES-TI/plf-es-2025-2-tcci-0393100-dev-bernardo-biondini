@startuml
skinparam shadowing false
skinparam linetype ortho
skinparam RectangleBorderColor #333
skinparam RectangleBackgroundColor #F3F7FF
skinparam ArrowColor #444
title UC 27 - Anexar Ofício (Comunicação)

rectangle "Usuario" as User
rectangle "DemandaOficioController" as C
rectangle "DemandaOficioService" as S
database "DemandaOficioDB" as DB
rectangle "AbrirDemandaService" as INC_AbrirDemandaService
rectangle "RegistrarPessoaAtendidaService" as EXT_RegistrarPessoaAtendidaService
rectangle "DefinirPrazoService" as EXT_DefinirPrazoService
rectangle "AtribuirResponsavelService" as EXT_AtribuirResponsavelService

left to right direction

User -down-> C : 1. Solicita "Anexar Ofício"
C -down-> S : 2. Executa lógica
S --> INC_AbrirDemandaService : 3. Include AbrirDemanda
INC_AbrirDemandaService --> DB : 4. CRUD
DB --> INC_AbrirDemandaService : 5. Resultado
INC_AbrirDemandaService --> S : 6. Retorno
S --> DB : 7. CRUD principal
DB --> S : 8. Resultado
S --> EXT_RegistrarPessoaAtendidaService : 9. Extensão RegistrarPessoaAtendida
EXT_RegistrarPessoaAtendidaService --> DB : 10. CRUD
DB --> EXT_RegistrarPessoaAtendidaService : 11. Resultado
EXT_RegistrarPessoaAtendidaService --> S : 12. Retorno
S --> EXT_DefinirPrazoService : 13. Extensão DefinirPrazo
EXT_DefinirPrazoService --> DB : 14. CRUD
DB --> EXT_DefinirPrazoService : 15. Resultado
EXT_DefinirPrazoService --> S : 16. Retorno
S --> EXT_AtribuirResponsavelService : 17. Extensão AtribuirResponsavel
EXT_AtribuirResponsavelService --> DB : 18. CRUD
DB --> EXT_AtribuirResponsavelService : 19. Resultado
EXT_AtribuirResponsavelService --> S : 20. Retorno
S --> C : 21. Resposta
C --> User : 22. Sucesso

note bottom of S
Includes: AbrirDemanda\nExtends: RegistrarPessoaAtendida, DefinirPrazo, AtribuirResponsavel
end note

@enduml